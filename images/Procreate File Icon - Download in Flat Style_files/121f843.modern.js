(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1068:function(e,t,o){"use strict";var r=o(7),n=o(307),l=o.n(n),c=o(1066),d=o(1141);Object(c.d)({en:d}),t.a={components:{ValidationObserver:c.a,ValidationProvider:c.b},data:()=>({isLoading:!1}),methods:{validate(){var e=this;return Object(r.a)((function*(){if(!(yield e.$refs.observer.validate())){var title=l()(e.$refs.observer.errors,(e=>e.length))[0]||"Please check all fields";return e.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"}),!1}return!0}))()},onError(e){console.error(e);var title=null;e.response&&e.response.data?e.response.data.elements?(title=Object.values(e.response.data.elements)[0],this.$refs.observer&&this.$refs.observer.setErrors(e.response.data.elements)):e.response.data.message&&(title=e.response.data.message):title=e.message||"Oops, Something went wrong!",this.$root.$bvToast.toast(title,{title:title,variant:"danger",toaster:"b-toaster-bottom-center",solid:!1,noAutoHide:!1,bodyClass:"d-none"})}}}},2534:function(e,t,o){var content=o(3819);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(42).default)("eda0fe08",content,!0,{sourceMap:!1})},3818:function(e,t,o){"use strict";var r=o(2534),n=o.n(r);o.d(t,"default",(function(){return n.a}))},3819:function(e,t,o){var r=o(41)(!1);r.push([e.i,".modal_xQXdE .custom-radio{font-size:.875rem;margin-bottom:.5rem}\n",""]),r.locals={modal:"modal_xQXdE"},e.exports=r},4171:function(e,t,o){"use strict";o.r(t);o(218);var r=o(7),n=(o(515),o(30),o(44),o(31),o(4065)),l=o(1887),c=o(1453),d=o(1606),m=o(307),f=o.n(m),v=o(1066),h=o(1108),y=o(22),w=o(64),x=o(1068),_=o(163);Object(v.c)("required",h.e),Object(v.c)("min",h.d);var S={components:{BModal:n.a,BFormTextarea:l.a,BFormGroup:c.a,BFormRadioGroup:d.a,Lottie:_.a},mixins:[w.a,x.a],props:{subscription:{type:Object,default:()=>{}}},data(){return{form:{report:null,message:null},options:[{value:"Don't charge me on next renewal date",text:"Don't charge me on next renewal date (".concat(this.$root.$options.filters.date(this.subscription.next_billing_at),")"),label:"How can we welcome you back soon?"},{value:"I was not able to find relevant assets for my use case",text:"I was not able to find relevant assets for my use case",label:"What type of assets were you looking for?"},{value:"Service is not up to the mark",text:"Service is not up to the mark",label:"Sorry to disappoint you. What we did wrong?"},{value:"IconScout is too expensive",text:"IconScout is too expensive",label:"How much we should charge for the service?"},{value:"I found a better alternative",text:"I found a better alternative",label:"Which solution did you choose and why?"},{value:"other",text:"Other",label:"Please describe your reason *"}],canceledSubscription:!1,customErrorMessages:{en:{fields:{reason:{required:"Please choose any one reason"},description:{required:"Please describe your reason"}}}}}},computed:{labelContent(){var option=f()(this.options,{value:this.form.report});return option?option.label:"Please describe your reason"},discountedPrice(){return Number(.8*this.subscription.transaction.net_amount).toFixed(2)}},watch:{"form.report"(e){this.form.message="IconScout is too expensive"===e?"I would like to pay $".concat(this.discountedPrice," / ").concat(1===this.subscription.plan_info.frequency?this.subscription.plan_info.period:"".concat(this.subscription.plan_info.frequency," ").concat(this.subscription.plan_info.period,"s"),"."):null}},created(){Object(v.d)("en",this.customErrorMessages.en)},methods:{onSubmit(){var e=this;return Object(r.a)((function*(){try{if(yield e.validate()){var t=Object(y.b)("/api/v2/auth/subscriptions/{uuid}/cancel",{uuid:e.subscription.uuid}),o=Object(y.b)("/api/v2/auth/subscriptions/{uuid}/cancel/report",{uuid:e.subscription.uuid});e.isLoading=!0,yield Promise.all([e.$axios.post(t,e.form),e.$axios.post(o,e.form)]),e.$analytics.track("subscription_cancelled",{reason:e.form.report,message:e.form.message}),e.canceledSubscription=!0}}catch(t){e.onError(t)}finally{e.isLoading=!1}}))()},onClose(){this.$modal.close("modalCancelSubscription"),this.$router.push({name:"exclusive-3ds"})}}},k=o(3818),$=o(8);var component=Object($.a)(S,(function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{id:"modalCancelSubscription","modal-class":["scale",e.$style.modal],title:e.canceledSubscription?"We're sorry to see you go!":e.$t("modals.survey.title"),"hide-header-close":e.canceledSubscription,"no-close-on-backdrop":e.canceledSubscription,centered:"","hide-footer":"",visible:"",lazy:""}},[t("div",{staticClass:"p-2-5"},[e.canceledSubscription?t("div",{staticClass:"text-center lead"},[t("div",[t("span",[e._v("\n          Your request has been submitted, our support team will review it\n          soon and get back to you.\n        ")])]),e._v(" "),t("lottie",{staticClass:"mb-6",attrs:{height:258,width:258,observe:!1,intermission:"0",speed:"1","animation-name":"EmptyState",loop:""}}),e._v(" "),t("button",{staticClass:"btn btn-primary btn-block mt-5",attrs:{type:"button"},on:{click:e.onClose}},[e._v("\n        Explore Exclusive Assets\n      ")])],1):[t("p",{staticClass:"mb-4 font-size-sm"},[e._v("\n        Thank you for giving us a chance, we would love to understand more\n        from you about how we could have made your experience better.\n      ")]),e._v(" "),t("validation-observer",{ref:"observer",scopedSlots:e._u([{key:"default",fn:function(o){var{invalid:r}=o;return[t("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)}}},[t("div",{staticClass:"font-weight-bold mb-2-5"},[e._v("\n            Why do you want to cancel?\n            "),t("span",{staticClass:"text-danger"},[e._v("*")])]),e._v(" "),t("b-form-group",[t("validation-provider",{attrs:{rules:"required",vid:"report",name:"reason"},scopedSlots:e._u([{key:"default",fn:function(o){var{failed:r}=o;return[t("b-form-radio-group",{attrs:{options:e.options,state:!r,stacked:""},model:{value:e.form.report,callback:function(t){e.$set(e.form,"report",t)},expression:"form.report"}})]}}],null,!0)})],1),e._v(" "),t("b-form-group",{staticClass:"mb-0"},[t("validation-provider",{attrs:{disabled:"other"!==e.form.report,vid:"message",name:"description",rules:"required|min:15"},scopedSlots:e._u([{key:"default",fn:function(o){var{failed:r}=o;return[t("div",{staticClass:"d-flex justify-content-between"},[t("label",{staticClass:"font-weight-bold",attrs:{for:"description"}},[e._v("\n                  "+e._s(e.labelContent)+"\n                  "),t("span",{staticClass:"text-danger"},[e._v("*")])]),e._v(" "),t("span",{staticClass:"o50 font-size-sm"},[e._v("min 15 characters")])]),e._v(" "),t("b-form-textarea",{attrs:{id:"description",rows:2,"max-rows":5,state:!r,name:"description",placeholder:"Briefly describe the reason"},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message","string"==typeof t?t.trim():t)},expression:"form.message"}})]}}],null,!0)})],1),e._v(" "),t("button",{class:["btn btn-primary btn-block mt-5",e.isLoading?"ajax-loading disabled":null],attrs:{disabled:r,type:"submit"}},[e._v("\n            Submit Request\n          ")])],1)]}}])})]],2)])}),[],!1,(function(e){this.$style=k.default.locals||k.default}),null,null);t.default=component.exports}}]);
//# sourceMappingURL=121f843.modern.js.map